{% extends 'base.html' %}

{% block content %}
<div class="container" style="max-width:900px">
  <div style="margin-bottom:40px">
    <h1 style="margin:0 0 8px 0; font-size:2rem; font-weight:700">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>
    <p style="color:var(--muted); margin:0">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –∑–∞–∫–∞–∑</p>
  </div>

  {% if items %}
    <div style="display:grid; grid-template-columns:1fr 350px; gap:30px">
      <!-- –¢–æ–≤–∞—Ä—ã -->
      <div style="background:var(--light); border-radius:12px; padding:24px; border:1px solid var(--border)">
        <h2 style="margin:0 0 20px 0; font-size:1.3rem; font-weight:700">–¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ</h2>

        {% for item in items %}
          <div style="display:flex; gap:16px; padding:16px 0; border-bottom:1px solid var(--border)">
            {% if item.product.image %}
              <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" style="width:80px; height:80px; object-fit:cover; border-radius:8px">
            {% else %}
              <div style="width:80px; height:80px; background:var(--border); border-radius:8px"></div>
            {% endif %}

            <div style="flex:1">
              <h3 style="margin:0 0 4px 0; font-weight:600">{{ item.product.name }}</h3>
              <p style="color:var(--muted); margin:0 0 8px 0; font-size:0.9rem">–ö–æ–ª-–≤–æ: {{ item.quantity }}</p>
              <div style="display:flex; justify-content:space-between; align-items:center">
                <span style="font-weight:700; font-size:1.1rem">‚ÇΩ{{ item.product.price }}</span>
                <a href="{% url 'remove_from_cart' item.id %}" style="color:#d32f2f; text-decoration:none; font-size:0.9rem; font-weight:600">–£–¥–∞–ª–∏—Ç—å</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>

      <!-- –ò—Ç–æ–≥–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
      <div style="background:var(--light); border-radius:12px; padding:24px; border:1px solid var(--border); height:fit-content; position:sticky; top:20px">
        <h2 style="margin:0 0 20px 0; font-size:1.1rem; font-weight:700">–ò—Ç–æ–≥–æ</h2>

        <div style="background:rgba(255, 204, 0, 0.1); padding:16px; border-radius:8px; margin-bottom:20px">
          <div style="display:flex; justify-content:space-between; margin-bottom:8px">
            <span style="color:var(--muted)">–°—É–º–º–∞ —Ç–æ–≤–∞—Ä–æ–≤:</span>
            <span style="font-weight:600">‚ÇΩ{{ total }}</span>
          </div>
          <div style="display:flex; justify-content:space-between; margin-bottom:8px">
            <span style="color:var(--muted)">–î–æ—Å—Ç–∞–≤–∫–∞:</span>
            <span style="font-weight:600">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
          </div>
          <div style="border-top:1px solid rgba(0,0,0,0.1); padding-top:8px; margin-top:8px">
            <div style="display:flex; justify-content:space-between">
              <span style="font-weight:700">–ö –æ–ø–ª–∞—Ç–µ:</span>
              <span style="font-weight:700; font-size:1.2rem; color:var(--primary)">‚ÇΩ{{ total }}</span>
            </div>
          </div>
        </div>

        <form method="post" style="margin-bottom:12px">
          {% csrf_token %}
          <button type="submit" style="width:100%; padding:14px; background:var(--primary); color:var(--dark); border:none; border-radius:8px; font-weight:700; font-size:1rem; cursor:pointer">
            ‚úì –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
          </button>
        </form>

        <a href="{% url 'product_list' %}" style="display:block; padding:12px; border:1px solid var(--border); border-radius:8px; text-decoration:none; color:var(--text); font-weight:600; text-align:center">
          ‚Üê –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏
        </a>

        <p style="color:var(--muted); font-size:0.85rem; margin-top:16px; text-align:center">
          –í—Å–µ —Ç–æ–≤–∞—Ä—ã –ø–æ –ª—É—á—à–∏–º —Ü–µ–Ω–∞–º –≤ StoreHub
        </p>
      </div>
    </div>

  {% else %}
    <div style="background:var(--light); border-radius:12px; padding:60px 24px; border:1px solid var(--border); text-align:center">
      <div style="font-size:3rem; margin-bottom:16px">üõí</div>
      <h2 style="margin:0 0 8px 0; font-size:1.5rem; font-weight:700">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h2>
      <p style="color:var(--muted); margin:0 0 24px 0">–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã, —á—Ç–æ–±—ã –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</p>
      <a href="{% url 'product_list' %}" style="display:inline-block; padding:14px 28px; background:var(--primary); color:var(--dark); text-decoration:none; border-radius:8px; font-weight:700">
        –ù–∞—á–∞—Ç—å –ø–æ–∫—É–ø–∫–∏
      </a>
    </div>
  {% endif %}
</div>

<style>
  @media (max-width: 768px) {
    [style*="grid-template-columns:1fr 350px"] {
      grid-template-columns: 1fr;
    }

    [style*="position:sticky"] {
      position: relative;
    }
  }
</style>
{% endblock %}
